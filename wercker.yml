box: wercker/ruby
build:
  steps:
    - script:
        name: ls
        code: ls
    - script:
        name: make ~/.ssh
        code: mkdir -p $HOME/.ssh
    - create-file:
        name: put private key
        filename: $HOME/.ssh/id_rsa
        overrite: true
        hide-from-log: true
        content: $SSH_KEY_PRIVATE
    - create-file:
        name: put tugboat config
        filename: $HOME/.tugboat
        overrite: true
        hide-from-log: true
        content: $TUGBOAT_CONFIG
    - script:
        name: install tugboat
        code: sudo gem install tugboat --no-ri --no-rdoc
    - script:
        name: run script
        code: bash -x ./ci/script.bash


